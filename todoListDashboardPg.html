<html>

<head>
    <meta charset='UTF-8'/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="theme-color" content="#ff6f47" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" integrity="sha512-HK5fgLBL+xu6dm/Ii3z4xhlSUyZgTT9tuc/hSrtw6uzJOvgRr2a9jyxxT1ely+B+xFAmJKVSTbpM/CuL7qxO8w==" crossorigin="anonymous" />
        
        <link rel='stylesheet' href='todoListDashboardPg.css'>

        <link rel="preconnect" href="https://fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">
        <title>To DO List from Developer ED-Priority Tasks Pg</title>
</head>
    <body> 


        <div class='circleDiv'></div>
        <div class='greetingDiv'>
            <h1>Hello Maryam!</h1>
            <p class='greetingP'>These are your to-do stats:</p>
        </div>

    <div id='containerStatsDiv'>
     <div id='allStatsDiv'>
        <div class='urgentStats'><div class='circleDivSmall'></div><span id='urgentStatSpan'>9 </span><div><a href='displayUrgentTasksPg.html'>urgent tasks</a></div></div>
        <div class='nonUrgentStats'><div class='circleDivSmall'></div><span id='nonUrgentStatSpan'>7 </span><div><a href='yetAnotherToDoListDvEdMyVersion.html'>non-urgent tasks</a></div></div>
        <div class='completedStats'><div class='circleDivSmall'></div><span id='completedStatSpan'>5 </span><div><a href='yetAnotherToDoListDvEdMyVersion.html'id='goToCompletedTasks'>completed tasks</a></div></div>
    </div> 
</div>


<div id='divForCircleBottom'>
    <div class='circleDivBottom'></div>

</div>

<div id='goalMsgDiv'>
    <div id='goalMsg'>Your Most Important Goal Currently:</div>
</div>

<div id='goalDiv'>
    <div id='goal'>Finish wireframes before meeting</div>
</div>

<div id='changeGoalBtnDiv'>
    <button id='changeGoalBtn'>Change goal</button>
</div>


<div id='bottomDiv'>
    <div id='bottomDivInnerDiv'></div>
</div>




<div class='modal' id='modal'>


    <div class='modal-header0'>
        <div class='title'></div>
        <button id='close-btn'>&times;</button>
    </div>
    <div class='modal-header2'>

        <div id='iconDiv'><i class="fas fa-check-circle"></i></div>
        <div>Hey there!</div>
        <div id='modalMsg'>Let's get started!</div>
    </div> 

    <div class='modal-header'>
        <div class='nothinModal'></div>
        
    </div>
    
   
    <div id='iconDiv'><i class="fas fa-check-circle"></i></div>
  
    <div id='modalBody'> 


        <p id='modalBodyQuestion'>What is your most important goal currently? We'll help you keep it front and center!</p>
       
    </div> 


    <div id='modalInput'>
        <input type='text'class='mainGoalInput'/>

        <button class='addNewGoal' type='submit'>
            <i class='fas fa-plus-square'></i>
        </button>

    </div>
   
</div>

        <script>
            
            //Variables:
           const urgentStatSpan=document.getElementById('urgentStatSpan');
           const nonUrgentStatSpan=document.getElementById('nonUrgentStatSpan');
           const completedStatSpan=document.getElementById('completedStatSpan');


           const changeGoalBtn=document.getElementById('changeGoalBtn');
           const modal=document.getElementById('modal');
           const closeBtn=document.getElementById('close-btn');

           const addGoalInput=document.querySelector('.mainGoalInput');

           const addNewGoalBtn=document.querySelector('.addNewGoal');

           const mostImportantGoalCurrently=document.getElementById('goal');



            //setting the most important goal on dashboard pg to the goal saved in localStorage's mainGoalCurrently key:
           if(localStorage.getItem('mainGoalCurrently')){

            const vipGoal=JSON.parse(localStorage.getItem('mainGoalCurrently'));

            mostImportantGoalCurrently.innerHTML=vipGoal;

           };

           







           //Event Listeners:

            document.addEventListener('DOMContentLoaded', getToDoStats);


           
            


            changeGoalBtn.addEventListener('click', function(){


                console.log('show that modal form yall!');
                modal.style.display='block';
            });





            closeBtn.addEventListener('click', function(){
                console.log('close this modal now!');

                modal.style.display='none';
            }) 



            addNewGoalBtn.addEventListener('click', function(){

                console.log('clicked the modal button now!');

                 let inputVal=addGoalInput.value;

                 if(inputVal){
                     localStorage.setItem('mainGoalCurrently', JSON.stringify(inputVal));

                    mostImportantGoalCurrently.innerHTML=JSON.parse(localStorage.getItem('mainGoalCurrently'));
                   

                    addGoalInput.value='';
                    
                 }
                 
            })












            //Functions:


            function getToDoStats(){
              
               //to display urgent tasks on dashboard stats pg:
                let urgentTasksNum=JSON.parse(localStorage.getItem('urg')).length;

               urgentStatSpan.innerHTML=urgentTasksNum;

               console.log(urgentTasksNum+ ' helllllllloooo');



                //to display non-urgent tasks on dashboard stats pg:
                let nonUrgentTasksNum=JSON.parse(localStorage.getItem('todos')).length;

                nonUrgentStatSpan.innerHTML=nonUrgentTasksNum;



                //to display completed tasks on dashboard stats pg:

                let completedTasksNum=JSON.parse(localStorage.getItem('completed')).length;

                completedStatSpan.innerHTML=completedTasksNum;



            }
        </script>
    </body>

    </html>
